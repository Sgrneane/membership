{% extends 'login_layout/layout.html' %}
{% load static %}
{% block content %}

            <div class="col-md-9 my-profile-w-80 g-0">
                {% include 'management/topbar.html' %}

                <div class="main-section-container">
                    <div class="row back-link">
                        <a href="#" onclick="history.back()">
                            <div class="icon-box"><span class="material-symbols-outlined">
                                    arrow_back_ios
                                </span></div>Events <span style="color: #808080; margin-left: 5px;"> >
                                View</span>
                        </a>
                    </div>

                    <div class="multilevel-form">
                            <div class="step" id="step1">
                                <h3 class="form-title">{{ event.name }}</h3>
                                <hr>

                                

                                <div class="row mb-3">
                                    <div class="col-md-12 event-card">
                                        <img src="{{ event.banner.url }}" alt="">
                                    </div>
                                </div>

                                <div class="row mb-3">
                                    <div class="col-md-4">
                                        <label class="form-label cm">Platform or venue</label>
                                        <p class="data d-flex align-items-center">
                                            <span class="material-symbols-outlined me-2">
                                              {% if event.type == 1 %}dialogs
                                              {% else %} location_on
                                              {% endif %}
                                            </span> {{ event.veneu }}
                                        </p>
                                    </div>

                                    <div class="col-md-4">
                                        <label class="form-label cm">Event date</label>
                                        <p class="data d-flex align-items-center">
                                            <span class="material-symbols-outlined me-2">
                                              calendar_month
                                            </span> {{ event.date }}
                                          </p>
                                    </div>

                                    <div class="col-md-4">
                                        <label class="form-label cm">Event duration</label>
                                        <p class="data d-flex align-items-center">
                                            <span class="material-symbols-outlined me-2">
                                              pace
                                            </span>{{ event.duration }}
                                          </p>
                                    </div>

                                </div>
                                
                                <div class="row mb-3">
                                    <div class="col-md-12">
                                        <label class="form-label cm">Event description</label>
                                        <p class="card-text event-desc">
                                           {{ event.description }}
                                        </p>
                                    </div> 
                                </div>

                                <div class="row mb-3">
                                    <div class="col-md-12">
                                        <label class="form-label cm">Guest description</label>
                                        <p class="card-text event-desc">
                                           {{ event.guest_description }}
                                        </p>
                                    </div>
                                </div>

                                <!-- <div class="row mb-3">
                                    <div class="col-md-12">
                                        <label class="form-label cm">Tickets or pricing description</label>
                                        <p class="card-text event-desc">
                                            {{ event.ticket_pricing_description}}
                                        </p>
                                    </div>
                                </div>

                                {% if event.pricing_type == 'paid' and ticket_types %}
                                    <div class="row mb-3">
                                        <div class="col-md-12">
                                            <label class="form-label cm">Ticket Types</label>
                                            {% for ticket_type in ticket_types %}
                                                <p class="card-text event-desc">
                                                    <strong>Name:</strong> {{ ticket_type.name }}<br>
                                                    <strong>Description:</strong> {{ ticket_type.description }}<br>
                                                    <strong>Limit:</strong> {{ ticket_type.limit }}<br>
                                                    <strong>Price:</strong> {{ ticket_type.price }}
                                                </p>
                                            {% endfor %}
                                        </div>
                                    </div>
                                {% else %}
                                    <div class="row mb-3">
                                        <div class="col-md-12">
                                            <label class="form-label cm">Ticket Types</label>
                                            <p class="card-text event-desc">This is a free event, no ticket needed.</p>
                                        </div>
                                    </div>
                                {% endif %} -->

                                <div class="row mb-3">
                                    <div class="col-md-12">
                                        <label class="form-label cm">Tickets or pricing description</label>
                                        
                
                                        <div class="event-desc">
                                        {% if event.pricing_type == 'paid' and ticket_types %}
                                        <table class="w-100 mb-3 border">
                                          <thead>
                                            <tr>
                                              <th class="form-label p-1">Ticket Type</th>
                                              <th class="form-label p-1">Ticket Description</th>
                                              <th class="form-label p-1">Ticket Limit (Number of tickets)</th>
                                              <th class="form-label p-1">Ticket Price</th>
                                            </tr>
                                          </thead>
                                          <tbody>
                                        
                                          {% for ticket_type in ticket_types %}
                                              <tr class="card-text">
                                                <td class="card-text p-1">{{ ticket_type.name }}</td> 
                                                <td class="card-text p-1">{{ ticket_type.description }}</td>
                                                <td class="card-text p-1">{{ ticket_type.limit }}</td>
                                                <td class="card-text p-1">{{ ticket_type.price }}</td> 
                                              </tr>
                                        {% endfor %}
                                      </tbody>
                                      </table>
                                        {% endif %}
                                        <p class="card-text">
                                          {{ event.ticket_pricing_description}}
                                      </p>
                                    </div>
                                    </div>
                                </div>

                                <div class="row mb-3">
                                    {% if event.type == 2 %}
                                    <div class="col-md-12 map">
                                        <label class="form-label cm">Venue location</label>
                                        {{ event.url_location|safe }}
                                    </div>

                                    {% else %}

                                    <div class="col-md-12">
                                        <label class="form-label cm">Platform link</label>
                                        <p class="data d-flex align-items-center">
                                            <span class="material-symbols-outlined me-2">
                                                attach_file
                                            </span>
                                            <a href="{{ event.url_location }}">{{ event.url_location }}</a> 
                                        </p>
                                    </div>      
                                        {% endif %}    
                                    </div>
<!-- 
                                <div class="row mb-3">
                                    <div class="col-md-12">
                                         Button trigger modal
                                        <button type="button" class="btn btn-primary w-25" data-bs-toggle="modal" data-bs-target="#participate">
                                            Participate
                                        </button>
                                    </div>
                                </div> -->
                                


                                <!-- <div class="row mb-3">
                                    <div class="col-md-12 map">
                                        <label class="form-label cm">Notified groups</label>
                                        <p class="mt-2">
                                        {% for group in event.groups.all %}
                                            <span class="group-badge me-2">{{ group.name }}</span>
                                        {% endfor %}
                                        </p>
                                    </div>       
                                </div> -->


                                
                                


                                <!-- <div class="row mb-3">
                                        <div class="col-md-8">
                                            <form action="">
                                            <label class="form-label cm">Notify other groups </label>
                                            <select class="contact-list js-states form-control cm" name="groups[]" multiple="multiple">
                                                {% for group in groups %}
                                                <option value="all_member">{{ group.name }}</option>
                                               {% endfor %}
                                            </select>
                                        </div>
                                        <div class="col-md-4">
                                            <label></label>
                                            <button class="btn submit-btn w-100">Notify</button>
                                        </div>
                                    </form>
                                </div> -->

                            </div>

                    </div>

                </div>
                <!-- Participate button -->
               <!-- Participate button -->
{% if request.user.role == 2 %}
<a href="{% url 'events:participate' event.id %}" class="btn submit-btn">Going</a>
<form method="post" action="">
    {% csrf_token %}
    <input type="hidden" name="hello" value="2">
    <button type="submit" class="btn submit-btn">Not Interested</button>
</form>
{% endif %}

            
        </div>

            
{% endblock %}
{% block scripts %}
<script>
    $(document).ready(function() {
        $(".contact-list").select2({
            placeholder: "Select mailing group"
        });
    }); 
</script>
{% endblock %}